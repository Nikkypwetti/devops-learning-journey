# Daily Learning Log

## Date: 2025-12-1

### ðŸŽ¯ Today's Focus

- [ ] EC2 Instance Storage
- [ ] ELB & ASG (Elastic Load Balancing, Auto Scaling Groups)
- [ ] Hands-on lab

### ðŸ“– What I Learned

1. **EC2 Image Builder**

   - Quickly, what does that mean for the exam? That means that you're gonna be able with EC2 Image Builder to automate the creation, maintain, validate and test AMIs for EC2 instances.

2. **High Availability, Scalability, Elasticity**

   - This is a section where we really see the power of the AWS cloud and the cloud in general, and see how these new paradigms we saw really help us shine and make our application scales seamlessly.

   - The concept of Scalability and High Availability. So if your applications can scale, that means that it can handle greater loads by adapting. And there are two kinds of scalability in the cloud. There is vertical scalability and horizontal scalability, also called elasticity.

   - So imagine, we have a call center and we just receive calls. Now let's see what it means to be scalable in that case. So first, let's deal with vertical scalability. In AWS, when you are vertically scalable, that means that you can increase the size of the instance. So for our call center, say we have a junior operator and say we were able to upgrade that operator, we would get a senior operator. And for example, the senior operator can handle a lot more calls than the junior operator because it's more experienced. So this would be what vertical scalability looks like in a call center. If we could upgrade obviously, a junior operator into a senior operator.

   - So in AWS, for example, say your application runs on the t2.micro, and to do a vertical scalability for that application, that means that now we run our application on a t2.large. So we've changed the size of our EC2 instance. And vertical scalability is very common when you have a non-distributed system, for example, a database. If you want to give more performance to your database, you would just increase the size of your database. But usually with vertical scalability, there is a limit to how much you can vertically scale and that is a limit of the hardware. Even though nowadays these limits can be very, very, very high.

   - Okay, next is horizontal scalability. So that means that now instead of increasing the size of your EC2 instance, you increase the number of instances or systems for your application. So back into our call center example, we have an operator, and we want to do horizontal scalability for that operator, that means we will add another operator. And if we need to handle more calls, we will add another operator, and so on. So maybe we can scale horizontally from one operator all the way to six operators.

3. **ELB - Elastic Load Balancing**
   - The first service that will allow us to be more elastic on AWS, this is called elastic load balancing.

4. **Application Load Balancer (ALB) Hands-on**

   - So we are going to practice launching a load balancer, but first, we need to send traffic to something. So first we're going to launch EC2 Instances.

   - Then i am going to launch an instance and the number of my instance will be 2 and in the User Data i will copy all the code and paste it there and launch the instances and i am going to rename one instance and then my two instances is ready.

   - Then i will load both IPv4 in browser, And so what we'd like to do is to have only one URL to access these two EC2 instances and balance the load between them. So for this of course, we're going to use a load balancer.

   - So on the left hand side i will click on load balancers then select create load balancers and then i will select to create ALB among the other type of load balancers.

   - So this scheme is internet facing and the address type is IPv4. For network mapping, we need to decide where to deploy the load balancer and how many availability zones. So let's deploy it in all of them. and then we need to assign a security group to our load balancer.

   - SO let's create a new security group, and we need to only allow HTTP traffic. So I'll call it demo-sg-load-balancer. And my description is (Allow HTTP into load balancer), into ALB, and the inbound rules is going to allow all HTTP from anywhere. Okay, and the outbound rules are fine. and then create the security group.

   - So back to load balancer page, refresh this page, choose my demo-sg-load-balancer and remove the default security group so that I'm only left with one security group.

   - Then scroll down and And we are under listeners and routing. And so we need to route the traffic from HTTP on port 80 to a target group. And a target group is nothing more than a group of my EC2 instances that were created.

   - So for this we need to create a target group. So let's click create target group. And the basic configuration tells us that we want to group instances together, So we want to group instances together and I'll call this one demo-tg-alb. The protocol is HTTP on port 80. the version of HTTP is 1 so we'll keep it as 1. The health check is good. And then let's click on next.

   - And then we need to register our targets. So we're going to register both EC2 instances on port 80, and let's include them as spending below. So now my instances are registered and let's create this target group.

   - I need to refresh my page and use is demo-tg-alb. So this target group is created and it's linked to the listener on my load balancer on port 80.

   - So now I'm good to go and I can go ahead and create my load balancer. So I'm going to click on view load balancer.

   - So my ALB is now active, it's ready. there's a DNS name available for me. So I'm going to copy this, paste it in a new tab and through the application load balancer I'm able to get a hello world. But the cool thing about it is that if I refresh this page and keep on refreshing it, then as you can see the target is changing. That's because my application load balancer is actually redirecting between both my EC2 instances.

   - Well, if we go to our target group, under target, and we look at the targets of my target group, as you can see they're both healthy. That means that the application load balancer through the target group is going to send traffic.

   - So if i go to my instances and i stop one instances my target group the first instance is unused because it's in stopped states. if I go back to my application balancer(browser) and refresh, the only response I'm getting for this instance is that one instance that is still up and running.but of course if I recover it, if I start it again then it's going to boot up.

5. **ASG - Auto Scaling Group Overview**

   - Okay, so now new have an application that can be load balanced through a load balancer, but how do we create, automatically these servers in the back end. For this we can use an auto scaling group.

6. **ASG - Auto Scaling Group Hands-on**

   - So before we go ahead and practice creating an auto scaling group, you need to take your first two instances, and we're actually going to terminate them. Okay, so now this is done, we can go ahead and create an auto scaling group.

   - For this, on the bottom left, click on Auto Scaling Groups, and we will create an auto scaling group. So I'll call this one DemoASG. And we need to create a launch template. So currently we have none. So let's create a launch template.

   - And I will call this one DemoLaunchTemplate. And this template is being used to tell to the ASG how to create EC2 instances within it. So this will look very, very similar to what we have when we create EC2 instances.

   - I can choose, for example, a quick start Amazon Linux, for getting Amazon Linux 2, as the base of my EC2 instance. Then we have an instance type that we can include, for example, t2.micro. For key pair, we will not include it in the launch templates or we can just say that, no, we don't need one. So this is good enough. For subnets, so we'll not include this in the launch templates. For security group, we can select a security group that's already existing.launch-wizard-1.

   - Under Advanced Network Configuration,we won't do anything.For EBS volumes for storage,we don't need to do anything.And then for Advanced Details,we want these instances to start with some user data then copy all the script and paste it then launch the template.

   - So let's refresh launch template, and then click on the DemoLaunchTemplate of Version 1. So here it describes what is going to happen, the type of instance we're going to have, the security groups and so on. So let's click on Next.

   - Next we have instance type requirements. So as we can see here, I have a t2.micro directly coming from my launch template. But we could override this, but we're not going to do it.

   - Then for network, which is a VPC. And then within the VPC, we choose the different availability zones where we may want to launch our EC2 instances. So I selected all the availability zone. And then I will just use balanced best efforts as an AZ distribution. This is just a default option then click on Next.

   - Next, we need to choose about load balancing. So we want to attach our ASG to an existing load balancer. And so therefore you're going to click on the Attach to an Existing Load Balancer, and then you will choose your demo-tg-alb that you've created from before to automatically attach these new EC2 instances to the target group that was created from before.

   - We don't touch anything about VPC Lattice, we don't touch anything about zonal shift. And for the health checks, we have the EC2 health checks always enabled. But we're also going to turn on the ELB health checks, the Elastic Load Balancing health checks so that if my load balancer detects that my EC2 instances are unhealthy, it will automatically terminate them. then click on Next.

   - Next we have group size. So here we can define the desired capacity as well as the minimum capacity and the maximum capacity. So we'll choose a desired capacity of 2. And then the min is 1, and the max has been automatically adjusted to 2. But we can also set it as 4.

   - Next, we have the ability to have automatic scaling. For now, I will not set up one, but we'll look into this later on.

   - And then we have instance maintenance policy. So right now I don't wanna change anything to keep it simple. So we'll choose No Policy. For Additional Capacity Setting, we'll just choose the default right now and not worry about it. And then we will not touch anything around these additional settings.then click on Next.

   - So we don't need any notification, and then we don't need any tags. And then we can review all the options. And when we're happy, we just click on Create Auto Scaling Group to get it created.

   - So I can click on it to get a bit more details. So let's go under Activity. And in here we have two activity history. That is, we are launching two new EC2 instances because, well, the desired capacity went from zero to two. And so if we have a look under the Instance Management tab, as you can see now, two EC2 instances are in the pending states.

   - So if I go under EC2 and look at my EC2 instances, in that UI, we also see that two instances are running, and these have been created by my auto scaling group. So the benefit is that now they are fully managed by my auto scaling group. And let's go see, for example, in my target group as well. So if I go to my target group on the left-hand side and look at my demo-tg-alb right here. Scroll down.now we have two total targets, and these are the targets created by our auto scaling group.

   - So, again, thanks to the integration that we've defined between the auto scaling group and the load balancer, we are able to have automatically these new EC2 instances registered as targets in our target group. So currently they're unhealthy. This is because the instance hasn't started all the way yet. So let's wait a little bit until they become healthy.

   - So to speed up the check from unhealthy to healthy, you can go under Health Checks of your target group. And here we can edit the settings. And under Advanced Settings, we can say that the healthy threshold is going to be 2 and the interval is going to be five seconds. This is going to make the thing much quicker. So of course the timeout needs to be two seconds, something less than the interval itself. So let's save our changes.

   - So now both my instances are healthy. And so therefore if I go under my load balancer right here and I look at the DNS name and open it in a new tab, I get a hello world from both my instances. And this is cool because these two instances were created by the auto scaling group.

   - So if we take one of these instances, for example, and we can, for example, terminate it. So I'm going to click on it. And under the instance itself, I will do Instance State and then Terminate Instance. Now it's been successfully terminated.

   - So what's going to happen is that because this instance is being shutting down and terminated, well, my auto scaling group is going to detect that, guess what? One of these instance is not in service anymore. It's being terminated.

   - And so, therefore, because we have an auto scaling group with a desired capacity of two instances, automatically a new instance should appear.

   - So let's observe this behavior by having here the activity history. And as you can see, in progress was terminating EC2 instance. And so an instance was taken out of service because, well, it's been terminated. And then we have a new activity saying, "Hey, an instance was launched "in response to an unhealthy instance "needing to be replaced."

   - So if we go under instance management, there's one instance in pending state which is being started, one instance being terminated, and one instance in service. And this is the whole power of auto scaling groups.

   - And you could play around under details by editing the desired capacity yourself to set it to 1, for example, to terminate instances and only keep one of them or to set it to 4 and see the auto scaling group create multiple instances that will be registered with our load balancer, and so therefore the traffic is going to be distributed between four instances.

7. **Section Cleanup**

   - So, we are going to clean up our instances and so on, but if you try to go in instances and actually terminate these two instances, this will not work, because if you do so, then the auto-scaling group will recreate them. So, the strategy here is to actually go under the auto-scaling group, and we're going to delete the auto-scaling group altogether, so just type 'Delete' in here to confirm the deletion on it, and then the next thing we have to delete is the load balancer.

   - So find your application balancer action and then delete. Confirm to agree and you're good to go and finally, you may be wondering, well, should I delete my target group? Well, we don't have to because the target group don't cost you any money and the target group is going to be empty because we have deleted the auto-scaling group and we have deleted the low balancer. That's it. When the ASG is going to be gone, then your EC2 instances, that's your ASG managers, will also be gone, so, you'll be fully clean.

8. **ELB & ASG Summary**

   - So first, we discussed the concept of high availability. Scalability would be vertical and horizontal of an  elasticity and agility in that It is very important for you to understand to which concept corresponds to which features For example, high availability  means that you are having your application across multiple availability zone. Vertical scaling means that you're increasing the number of an instance. And horizontally scaling is that you are increasing the number of an instance. And horizontal scaling, is that you are increasing the number of instances. Elasticity is the ability to scale up and down based on demand. And agility is a concept of the Cloud that is going to be able to make you work faster, because you can create and delete resources very, very quickly.

   - Now, our load balancers, or ELB, are allowing us to distribute traffic across backend EC2 instances, and they can be spread out across multiple availability zones. We support health checks to make sure that the backend EC2 instances are indeed healthy. And we have four kinds of load bouncers. The classic one is old and retired. We have the application balancer for HTTP type of workload at the layer seven. Network load balancer for very high performance and TCP level load balancing, layer four. And finally, the gateway load balancer, layer three, to route the network itself, and make it go by, for example, through some virtual appliances.

   - We have auto scaling groups that allow us to implement elasticity for our application, therefore spreading our load across multiple AZ and scaling accordingly. So we scale these EC2 instances based on the demand on your system, and we can replace unhealthy instances. There's a tight integration between the ASG and the ELB. So this is why they are a great combination, and together, we achieve high availability, scalability, elasticity, and agility in the Cloud.

### ðŸ’» Hands-on Practice
```code
# Code examples here
