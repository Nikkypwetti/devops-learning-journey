# Daily Learning Log

## Date: 2025-12-7

### ðŸŽ¯ Today's Focus

- [X] Deployment and Managing Infrastructure as Scale  
- [X] Hands-on lab

### ðŸ“– What I Learned

1. **CloudFormation Overview**

   - So from an exam perspective, CloudFormation is going to be used when we have infrastructure as code, when we need to repeat an architecture in different environments, different regions, or even different AWS accounts.

2. **CloudFormation Hands-on**

    - So let's create a stack and let's make sure first of all that we are in the US East, Northern Virginia, US East 1 region, because the template I've created for you only works in that region.

    - So we're going to create a stack and we're going to use an existing template. So let's choose an existing template and here we have a list of different templates that we can use. We're going to upload a template file

    - So in your course code under CloudFormation, you have 0-just-EC2.yaml. And this is a very simple file right now which has a resource blog and it creates an instance called My instance.

    - The type is EC2 instance, and then you have a few properties. The first one is the availability zone, which is US East 1a and this is why you have to choose US East 1 as your region in CloudFormation service right now. And the image ID is this AMI ID. And as you should know, AMI IDs are scoped within the region. So for these two reasons, you must be in US East 1 for this hands-on The instance type is T2 micro.

    - We define how to launch an EC2 instance through this YAML file. So let's go ahead and actually upload this file. So select it and then you can actually view it in Application Composer.then click on next.

    - We have to provide a demo stack name. So I'll call this one demo CloudFormation and then some parameters. But because we don't define any parameters in our templates so far, we don't do anything here. Let's click on next.

    - So I'm just going to show you tag being CFDemo just to show you how tags work in CloudFormation.We scroll down, no permissions to set.We don't touch these stack failure options and Advanced options and so on. So let's click on next and we review and create. So click on submit.

    - On top of it, we notice that if you go to our EC2 instance and we look at the tags, we can see that some tags were applied by CloudFormation, which are the name of the CloudFormation, the name of the logical ID and the stack ID, but also the name we have specified. So the tag we specified has name CFDemo has also been applied to this EC2 instance.

    - Okay, so now that we have an instance, let's go ahead and update this stack. So we click on update and we replace the existing template. And this time we're going to choose this 1-ec2-with-sg-eip file. And if you have a look at it, this file is right here. So we have a more complete file now.

    - We have a parameter section to set the security group description. We have the EC2 instance section, which is a bit more complete because now it has security groups and it has two of those. We have an Elastic IP here that is attached to my instance. And we have one security group here defined for SSH rules.

    - So port 22 is going to be open and we have the server security group, which is going to be open on port 80 from everyone and port 22 from a very specific IP. So this is a more complete CloudFormation template.

    - Now let's go back to CloudFormation and we're going to apply these template. So here we are prompted with a parameter. So what is the security group description? So let's enter demo description. We don't touch the tags, we don't touch anything. Let's click on next.

    - And now because we are applying an update, we have a change set. And so we can preview the change sets, which is what is going to change in our CloudFormation stack. a few things are added. There is an Elastic IP, there is an SSH security group and a server security group. And it's add, so it's new. And my instance is going to change, it's going to be modified, and there is a column here says replacement true. That means that this EC2 instance is going to be replaced, that means that the previous one is going to be deleted and a new one is going to be created.

    - So now let's submit this update and see what happens. So CloudFormation is a very smart service because well, from just this code right here it's able to figure out exactly what to do thanks to the change sets, so it knows exactly what to create first.

    - So if i go into the EC2 console now we see that we have two EC2 instances. So a new instance got created and once it's created, again, it's going to be show updated under event tab, the update is complete.

    - So if we're quick and we go on the left hand side to Elastic IP, even though we may not have seen what it is here is Elastic IP that is properly created, properly tagged, and it is attached already to our EC2 instance. So now if I click on this one and then I click on networking at the bottom, you see Elastic IP address here was attached. So everything was done by CloudFormation and was done well.

    - And if you look at CloudFormation now in the events, as you can see, the Elastic IP was created and then there was a cleanup in progress due in progress. So that means that the previous EC2 instance right here, this one got terminated, which is very handy because CloudFormation takes care of everything.

    - So you can go into the resources tab and see everything that was created through CloudFormation. On top of it, if you go to the template and you click on view in Application Composer, you're able to see now your new architecture. So we have an EC2 instance connected to an Elastic IP and connected to two security groups.

    - So finally, of course, confirmation. You could go ahead and delete things manually. You could delete this Elastic IP and so on, and the EC2 instances manually. But this is actually not recommended. You don't wanna touch anything manually when using CloudFormation. Instead, you want to either update the templates, or if you wanted to delete everything, just click on delete. And CloudFormation will delete all the stack resources.

    - So CloudFormation is a really powerful service to do infrastructure as code because it's declarative. You just say what you want and CloudFormation figures it out, and all the code will control your infrastructure.

3. **AWS Cloud Development Kit(CDK) Overview**

4. **Beanstalk Overview**

5. **Beanstalk Hands-on**

    - So I'm gonna go into the Elastic Beanstalk console and we're going to create our first application. So we have an option to choose either a web server environment or a worker environment. So right now we want to run a website, so we'll choose web server environment, but if we wanted to process tasks off of a queue, then we would choose a worker environment.

    - So this platform is going to be managed and I will choose node JS, and then I will just choose the default options.

    - Next, we need to choose some application code. So I'll use a sample application. We can definitely approve our own code, but we don't have that right now, and so this sample application will be matching the environment I have right here.

    - We have presets, and Beanstalk can be quite complicated for the configuration, and as such, we can set recommended values for either a single instance, which is free tier eligible, or high availability, where we have a load balancer for example, or custom configuration, if you wanted to customize everything. Now to keep things simple, we're going to go over single instance. then click on next.

    - Next you have to configure the service access. So right now, no roles are available for me here, so I'm going to just create a role for a service role. So it's for a service. This is for a Beanstalk environment. We click on Next. We have these permission policies. We click on Next, and the name is AWS Elastic Beanstalk service role. So this is all pre-filled for us. Let's create this role. So now this role is created, and I can refresh and select it.

    - Now for the EC2 instance profile, this is the same thing. We're going to create a role, and now this is for Beanstalk Compute. Click on Next. We have all these things already added to this role, so that's perfect. Click on Next, scroll down, click on Create Role. The role is not created.

    - After checking the review Click on Submit, and this will go and create our first Beanstalk environment. So now if we scroll down under Events, as we can see, some events are happening, and these events actually come from a service, called CloudFormation.

    - So if you go into the CloudFormation console, we can see our Elastic Beanstalk stack under event tab.

    - Under Resources, we can see we have created a auto scaling group. We have created a launch configuration, and so on, and Elastic IP, and so on.

    - One thing you can look at is under templates, you can view the templates in Application Composer. And the cool thing about it is that we can visually see what is being created by a CloudFormation.

    - So now let's go back into Elastic Beanstalk. So in the Events tab, as we can see now, we have some information. For example, a security group was created, and then an Elastic IP was created. Then we wait for the EC2 instances to launch, and then the instances will be created.

    - So if I switch now and I go under EC2, the EC2 console, and look at my instances running, actually yes, one of my instances is running, it's using a T-3 micro.

    - This instance has a public IP address, right here. And if I go on the left hand side under Elastic IPs, we can see that this elastic IP address was created and is allocated to our EC2 instance. And if I go under auto scaling groups, we can see that an auto scaling group was created, and this auto scaling group, under Instance Management, is managing my only EC2 instance. That's why it's called a single EC2 instance.

    - And when we get out of it is a domain name. So if I click on this domain name and open it in a new tab, I get, actually, access to my Beanstalk environment and my single EC2 instance, and it says, "Congratulations, you are now running Elastic Beanstalk on this EC2 instance," .

    - Now, more importantly, if we go under My Application, as we can see right here, there's My Application Dev. That's one environment, but I could go ahead and create a second environment, for example, My Application Prod, and that will allow us to really think about environments overall.

    - So to reason about it, Beanstalk is centered around code, and environments for your code, whereas, if you wanted to look at CloudFormation, the service we had seen before, CloudFormation is used to deploy stacks arbitrarily with any kind of infrastructure. So we've seen all that Beanstalk has created, including my auto scanning group, my EC2 instance, the Elastic IP, and so on.

6. **CodeDeploy Overview**

7. **CodeCommit Overview**

8. **CodeBuild Overview**

9. **CodePipeline Overview**

   - And so anytime you see orchestration of pipeline in your exam, you have to think AWS CodePipeline.

10. **CodeArtifact Overview**

    - So from an exam perspective, CodeArtifact is going to be very helpful if your team needs a artifact management system or a place to store their code dependencies.

11. **Systems Manager (SSM) Overview**

    - So, from an exam perspective, anytime you see a way to patch your fleet of EC2 instances or On-Premises servers, you have to think about SSM, or if you wanted to run a command consistently across all your servers, again, SSM would be the right way.

12. **SSM Session Manager Hands-on**

    - So let's have a look at the SSM Session Manager service, but first, we need to launch an EC2 instance. So let's launch an instance, We will not use any key pair. And then I will disable SSH traffic. So as you can see, my EC2 instance will have a security group that allows nothing.

    - Yet, we will be able to use an SSM Session Manager shell. So what I need to do actually is to attach an IAM instance profile to my instance to allow it to talk to the SSM service.

    - So click on create a new IAM role profile. Then let's create a role. For a service on AWS, it will be Amazon EC2. Click on next. Then, for permissions, we're going to filter for SSM and we will choose the Amazon SSM managed instance core. So let's select this and click on next.

    - So now that this role is created, we're going to refresh here and we're going to look for this demo EC2 role for SSM. Perfect. So let's go ahead and now, create and launch our instance.

    - And so the thing I have to check now is the SSM service. So let's go into Systems Manager. And on the left hand side, you're going to look for Fleet Manager and Fleet Manager is a service where all the EC2 instances that are registered with SSM will appear here. So they're called managed nodes.

    - Okay. So as soon as our instance is under Fleet Manager, that means that we're ready to run a secure shell against it. So to do so, on the left hand side and I will look for Session Manager.

    - So let's start a session, my EC2 instance under the security group does not have any inbound rule. Okay. So zero inbound rules in here. So click on start session, And the idea is that we're going to get a secure shell.

    - We have a secure shell and I didn't need to have SSH access so I can do ping google.com and this command is going to work, obviously. And if I do host to get the host name, so host name, My IPv6, is exactly corresponding to, and if you go into networking, the private IP address of my instance is the same as my hostname response. So that means that using the SSM secure shell, we're able to have indeed a secure shell directly from AWS without having SSH security keys and SSH access.

    - So to summarize, we have three ways of accessing our EC2 instance. Number one is to open the port 22 and then use SSH keys and with a terminal to do the SSH command. Number two is to use EC2 Instance Connect and that didn't require to get SSH keys because they will be temporarily uploaded onto the Amazon EC2 instance if we need to. So that was number two, but this required still the port 22 to be opened on our EC2 instance to have access with using EC2 Instance Connect. And then we've explored the third option which is Session Manager.

    - We can terminate this session, and finally we can terminate the instance.

13. **SSM Parameter Store Hands-on**

    - So I am in systems manager, and on the left hand side there is the parameter store. So going to create a parameter and the name is going to be demo parameter.

    - So the free one is standard. We'll use standard and then the type of parameter. So is it a string meaning it's a value that is, for example, a configuration or a list of values if you wanted to, or a secure string. And secure string is when you want to encrypt something in the parameter store because you're, for example going to add in API keys or passwords and so on.

    - So in this case, using a secure string is much better. But for simplicity's sake, let's use a string. And so you can choose the data type, so it could be a text or an image of type EC2, but we'll use text and say, hey the string is my configuration parameter. And then create the parameter.

    - In your parameter store you have this parameter named demo parameter that you can just click on and then retrieve the value of value. My configuration parameter on top of it. And then delete the parameter.

14. **Deployment Summary**

    - CloudFormation: This allows you to create templates, and these templates can be used to deploy infrastructure on AWS and to use these templates across different Regions and accounts to make your infrastructure truly repeatable.

### ðŸ’» Hands-on Practice

```code
# Code examples here
