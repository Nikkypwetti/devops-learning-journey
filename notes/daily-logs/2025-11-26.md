# Daily Learning Log

## Date: 2025-11-26

### ðŸŽ¯ Today's Focus

- [X] AWS CLI HANDS-ON
- [ ] Topic 2  
- [ ] Hands-on lab

### ðŸ“– What I Learn

1. **CREATING AWS ACCESS AND SECRET KEY**

   - So we click on the username (Root) and go under security credential and scroll down and click on create access key.

   - Then select using CLI option to create the access key then click the i understand statement and then click create access key.

   - And now, this is the only time you'll be able to have access to the access key and the secret access key so you can download the csv.

   - The first thing I have to do is to configure my AWS CLI. So I'm going to type: aws configure in my terminal. And then I am greeted with entering my access key id. Very nice, I can just enter this one, and press Enter and enter secret key and so on and then enter json for output.

   - SO to check if it's working i ma going to run command aws iam list-users then press enter this will list all users i have on my account.

   - Then i want to see what happen if we remove permissions from our users. So I'm gonna go to admins under group and I'm going to remove the user (Root) from the group admin.

   - Then if i go back to my Users it doesn't have any permission and i did it with my Root account and if i go to my IAM account and refresh it show warning that i did not have permission to do this, then try to run the same command aws iam list-users but we will get no response because access has been denied i have remove the permission.

   - Then add user back to the group so that it get the group permission back, So I'm gonna go into Groups, admins, and I'm going to add my user back into my group, and now I am an administrator again.

2. **AWS CLOUDSHELL**

   - So the cool thing about cloud shell is that whenever you are using the CLI, so for example it was am list users. This is going to return for you an API call as if the credentials being used, where the credentials of the accounts of you using the cloud right now which is why the API calls are working.

   - And by default, you can specify any kind of region you want to do. The API call using the management is region arguments, but in cloud shell, the default region is going to be the region you're currently in logged in right now in cloud shell.

   - Other things that you should know about cloud shell is that you have a full repository. So for example, right now,run ls command as we can see we have zero files within cloud shell but if we run echo "test" > demo.txt this is going to create a test file that contain a word test even if we restart the cloudshell then this file will stick. So all the files you are creating within your cultural environment, for example this demo that's TXT are going to stay.

   - And we can download or upload file using the cloud shell (pwd).

3. **IAM ROLES FOR SERVICES**

   - So some AWS services that we'll be launching throughout this course will need to perform actions on our behalf, on our account.

   - To do so, we will assign permissions to AWS services with IAM Roles.

   - we're going to create what's called an IAM Role. So these IAM role will be just like a user, but they are intended to be used not by physical people, but instead they will be used by AWS services.

   - EC2 Instance may want to perform some actions on AWS and to do so, we need to give permissions to our EC2 Instance. To do so, we're going to create an IAM Role and together they're going to make one entity.

   - And together, once the EC2 Instance is trying to access some information from AWS, then it will use the IAM Role. And if the permission assigned to the IAM Role is correct, then we're going to get access to the call we're trying to make.

   - Common Roles:
     . EC2 Instance Roles
     . Lambda Function Roles
     . Roles For CloudFormation

4. **IAM ROLES HANDS-ON**

   - So on Root account we click on Roles and we can see some roles have been created already and click create role, So a role is a way to give AWS entities permissions to do stuff on AWS.

   - Then we need to choose role that we want so i am going to choose AWS Services, and then we need to choose for which service we want this role to apply to. So as you can see, if you click on it, you have commonly used services, such as EC2 and Lambda, or a role for pretty much every service on AWS.

   - So we are going to create a role for an EC2 instance when we get to the EC2 section. And so we choose EC2, and the use case is just EC2. and then click next, and now that we create a role for an EC2 instance, we need to attach a policy. So I'm going to attach the IAM read only access to allow my EC2 instance to read whatever is in IAM. then click next

   - Next do meet to enter a demo, a role name, so DemoRoleForEC2 is going to be my role name, and then we select the trusted entities. So this is saying, hey, this role can be assumed by the EC2 service, and this is what defines it as a role for Amazon EC2 then click create Role.

   - Then verify the permission given to the roles.

   - Diagram:
         ```plaintext
         +---------------------------+
         |        IAM Role          |
         +---------------------------+
         | Name: DemoRoleForEC2     |
         | Trusted Entity: EC2      |
         | Permissions:             |
         | - IAM ReadOnly Access    |
         +---------------------------+
         ```

5. **IAM SECURITY TOOLS**

   - IAM Credentials Reports (Account-level):
     . A reports that lists all your account's users and the status of their various credentials.

   - IAM Access Advisor (User-level):
     .  Access Advisor is going to show the service permissions granted to a user and when those services were last accessed.

     . You can use this information to revise your policies, This will be very helpful because we are talking already about the principle of least privilege, and so using this tool, we're able to see which permissions are not used and reduce the permission a user can get to be inline with the principle of least privilege.

6. **IAM SECURITY TOOLS HANDS-ON**

   - So let generate IAM security credentials reports, then click on credentials reports then download credentials report which is going to create the CSV file.

   - So this report is extremely helpful if you want to look at some users that haven't been changing the password, or using it, or their account, it could be giving you a great way to find which users that deserve your attention from a security standpoint.

   - Now let's have a look at IAM Last Accessed. For this, I'm gonna go to my User, I click on Access Advisor (Last Access).

   - And Last Accessed is going to show me which services were accessed by my user and when. So as you can see, organizations, health, identity and access managers with IAM Service, EC2, Resource Explorer, were all accessed by my user.

   - So I use my user to access these things by clicking in the UI, but some services were not accessed, for example, AlexaForBusiness or AWS App2Container and so on.

   - So using Access and Advisor, you can actually have a look at whether or not the user has the correct permissions. And it turns out that maybe based on this access, have 37 pages of this, maybe the user needs access only to a few services but not all of them. And this UI allows you to drill down.

   - if a user accesses a specific service for example Amazon EC2, we are told that this is the administrator access that granted access to this service. So to summarize, Access Advisor becomes very helpful when you need to do granular user access permissions on AWS.

7. **IAM GUIDELINES AND BEST PRACTICES**

   - Don't use the root account except for AWS account setup.
   - One physical user = One AWS user.
   - Assign user to groups and assign permissions to groups.
   - Create a strong password policy.
   - Use and enforce the use of Multi Factor Authentication (MFA).
   - Create and use Roles for giving permissions to AWS services.
   - Use Access Key Programmatic Access (CLI/SDK).
   - Audit permissions of your account using IAM Credentials Report & IAM Access Advisor.
   - Never share IAM users & Access Keys.

8. **SHARED RESPONSIBILITY MODEL FOR IAM**

   - AWS is responsible for everything that they do, for example, their infrastructure and their global network security, the configuration and vulnerability analysis of the services they offer, and any sign of compliance that they are responsible for.

   **AWS**:

     . Infrastructure (Global network security).
     . Configuration and vulnerability analysis.
     . Compliance validation.

   - But regarding IAM, you are responsible for a lot of things that AWS will not do for you. You are responsible for creating your own users, your groups, your roles, your policies, the management of these policies, and the monitoring of that. You are responsible for enabling MFA on all accounts and enforcing this, not AWS. You are also responsible to make sure that the keys are rotated often.

   - You need to make sure that you use the IAM tools to apply the appropriate permissions, and again, you are responsible for analyzing the access patterns and review the permissions in your accounts, not AWS.

   **ME**:

     . Users, Groups, Roles, Policies management and monitoring.
     . Enable MFA on all accounts.
     . Rotate all my keys often.
     . Use IAM tools to apply appropriate permissions.
     . Analyze access patterns & review permissions.

   - So this is a very simple example, but an obvious one. But AWS is responsible for all the infrastructure, and you are responsible for how you use that infrastructure.

9. **IAM SUMMARY**

- Users: Mapped to a physical user, has a password for AWS console.

  - Groups: Contain user only.
  - Policies: JSON documents that outline permissions for users or groups.
  - Roles: For EC2 Instance and AWS services.
  - Security: MFA + Password policy.
  - AWS CLI: Manage your AWS services using the command-line.
  - AWS SDK: Manage your AWS services using a programming language.
  - Access Key: Access AWS using CLI or SDK.
  - Audit: IAM Credentials Reports and IAM Access Advisor.

### ðŸ’» Hands-on Practice

```code
# Code examples here
